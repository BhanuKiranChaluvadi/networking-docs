Network Packet Flow
===================

A network packet traverses through various stages as it moves through a system,
from routing to processing by IP tables, and finally through network
interfaces. Here is a high-level overview of the network packet flow:

1. Routing
----------
When a system receives a packet or needs to send a packet to another system, it
first consults the routing table to determine the path the packet should take.
The routing table contains rules and routes for forwarding packets to specific
network destinations. If a route matches the packet's destination, the system
forwards the packet to the appropriate next hop (gateway) or directly sends it
through the specified network interface.

2. IP tables
------------
IP tables are responsible for packet filtering and Network Address Translation
(NAT) within the Linux kernel. They consist of chains of rules that allow,
drop, or modify packets based on various criteria, such as source and
destination IP addresses, ports, and protocols. After the routing decision,
the packet goes through the IP tables, where it is processed by different
chains:

- PREROUTING: Processes incoming packets before routing. Used for DNAT.
- INPUT: Processes incoming packets destined for the local system.
- FORWARD: Processes packets that are being routed through the system (neither
  originating from nor destined for the local system).
- OUTPUT: Processes outgoing packets generated by the local system.
- POSTROUTING: Processes outgoing packets after routing. Used for SNAT.

3. Network Interfaces
----------------------
Finally, the packet reaches the appropriate network interface (e.g., Ethernet,
Wi-Fi, or virtual interfaces like a bridge or Docker network) based on the
routing decision. The network interface is responsible for transmitting or
receiving the packet on the physical or virtual network.

In summary, when a packet is sent or received by a system, it first goes
through the routing process to determine the correct path, then gets filtered
or modified by IP tables based on predefined rules, and finally passes through
the specified network interface for transmission or reception on the physical
or virtual network.
